{"ast":null,"code":"import React,{useState}from'react';import{Camera,Upload,Sparkles,Shirt,PawPrint,ShoppingBag,ShoppingBagIcon,RefreshCw}from'lucide-react';// All components, hooks, and logic in one file.\n// The main component must be named \"App\" and be the default export.\n// Tailwind CSS is used for styling.\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ACCESSORY_TYPES=['Earring','Necklace','Ring','Hat','Scarf','Glasses'];const TOP_TYPES=['blouse','t-shirt','shirt','hoodie','sweater','jacket'];const PANTS_TYPES=['pants','skirt','shorts','jeans','trousers','leggings'];const SHOES_TYPES=['shoes','sneakers','boots','sandals','heels','flats'];const DRESS_TYPES=['dress','overalls','jumpsuit'];// Helper function to convert a File object to a base64 string\nconst fileToBase64=file=>{return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=()=>resolve(reader.result);reader.onerror=error=>reject(error);reader.readAsDataURL(file);});};export default function App(){const[uploadedFaceImage,setUploadedFaceImage]=useState(null);const[faceImagePreview,setFaceImagePreview]=useState(null);const[mode,setMode]=useState('accessory');// 'accessory' or 'outfit'\n// Accessory state\nconst[uploadedAccessoryImage,setUploadedAccessoryImage]=useState(null);const[accessoryType,setAccessoryType]=useState(ACCESSORY_TYPES[0]);// Outfit state\nconst[uploadedTopImage,setUploadedTopImage]=useState(null);const[topType,setTopType]=useState(TOP_TYPES[0]);const[uploadedPantsImage,setUploadedPantsImage]=useState(null);const[pantsType,setPantsType]=useState(PANTS_TYPES[0]);const[uploadedShoesImage,setUploadedShoesImage]=useState(null);const[shoesType,setShoesType]=useState(SHOES_TYPES[0]);const[uploadedDressImage,setUploadedDressImage]=useState(null);const[dressType,setDressType]=useState(DRESS_TYPES[0]);const[generatedImage,setGeneratedImage]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[updatePrompt,setUpdatePrompt]=useState('');// New state to hold the description of the uploaded image\nconst[imageDescription,setImageDescription]=useState('');const[isAnalyzing,setIsAnalyzing]=useState(false);// Use the URL of your new Cloudflare Worker here\nconst WORKER_URL=\"https://your-worker-name.your-username.workers.dev\";const TEXT_ANALYSIS_ENDPOINT=\"\".concat(WORKER_URL,\"/analyze-image\");// hypothetical endpoint for clarity\nconst IMAGE_GEN_ENDPOINT=\"\".concat(WORKER_URL,\"/generate-image\");// hypothetical endpoint for clarity\nconst analyzeImage=async file=>{setIsAnalyzing(true);setError('');try{var _result$candidates,_result$candidates$,_result$candidates$$c,_result$candidates$$c2,_result$candidates$$c3;const imageData=await fileToBase64(file);const payload={contents:[{parts:[{text:\"Describe this image in a concise manner, focusing on the person's pose, the type of clothing they are wearing, and the background. Do not try to generate a new image.\"},{inlineData:{mimeType:file.type,data:imageData.split(',')[1]}}]}],model:\"gemini-2.5-flash-preview-05-20\"};// Call your proxy endpoint instead of the original API\nconst response=await fetch(TEXT_ANALYSIS_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const result=await response.json();const description=result===null||result===void 0?void 0:(_result$candidates=result.candidates)===null||_result$candidates===void 0?void 0:(_result$candidates$=_result$candidates[0])===null||_result$candidates$===void 0?void 0:(_result$candidates$$c=_result$candidates$.content)===null||_result$candidates$$c===void 0?void 0:(_result$candidates$$c2=_result$candidates$$c.parts)===null||_result$candidates$$c2===void 0?void 0:(_result$candidates$$c3=_result$candidates$$c2[0])===null||_result$candidates$$c3===void 0?void 0:_result$candidates$$c3.text;if(description){setImageDescription(description);}else{setError('Image analysis failed.');}}catch(e){console.error(\"Analysis API call failed:\",e);setError(\"An analysis error occurred: \".concat(e.message));}finally{setIsAnalyzing(false);}};const handleFaceImageUpload=event=>{const file=event.target.files[0];if(file){setUploadedFaceImage(file);setFaceImagePreview(URL.createObjectURL(file));setGeneratedImage(null);analyzeImage(file);// Start the analysis immediately\n}};const generateImage=async()=>{if(!uploadedFaceImage||isAnalyzing){setError('Please upload an image and wait for analysis to complete.');return;}setLoading(true);setError('');setGeneratedImage(null);setUpdatePrompt('');const faceImageData=await fileToBase64(uploadedFaceImage);let payload;if(mode==='accessory'){if(!uploadedAccessoryImage){setError('Please upload an accessory image.');setLoading(false);return;}const accessoryImageData=await fileToBase64(uploadedAccessoryImage);const initialPrompt=\"Given the image of a person (\".concat(imageDescription,\") and the image of a \").concat(accessoryType,\", add the \").concat(accessoryType,\" to the person. Ensure the accessory is appropriately placed and looks realistic. Completely replace any existing accessories and clothing with the new one. Do not alter the person's pose or background.\");payload={contents:[{parts:[{text:initialPrompt},{inlineData:{mimeType:uploadedFaceImage.type,data:faceImageData.split(',')[1]}},{inlineData:{mimeType:uploadedAccessoryImage.type,data:accessoryImageData.split(',')[1]}}]}],generationConfig:{responseModalities:[\"IMAGE\"]},model:\"gemini-2.5-flash-image-preview\"};}else{// mode === 'outfit'\nif(!uploadedTopImage&&!uploadedPantsImage&&!uploadedShoesImage&&!uploadedDressImage){setError('Please upload at least one outfit item: a top, pants, shoes, or a dress.');setLoading(false);return;}const parts=[{inlineData:{mimeType:uploadedFaceImage.type,data:faceImageData.split(',')[1]}}];let outfitDescription='';if(uploadedTopImage){const topImageData=await fileToBase64(uploadedTopImage);parts.push({inlineData:{mimeType:uploadedTopImage.type,data:topImageData.split(',')[1]}});outfitDescription+=\"a \".concat(topType,\" image, \");}if(uploadedPantsImage){const pantsImageData=await fileToBase64(uploadedPantsImage);parts.push({inlineData:{mimeType:uploadedPantsImage.type,data:pantsImageData.split(',')[1]}});outfitDescription+=\"a \".concat(pantsType,\" image, \");}if(uploadedShoesImage){const shoesImageData=await fileToBase64(uploadedShoesImage);parts.push({inlineData:{mimeType:uploadedShoesImage.type,data:shoesImageData.split(',')[1]}});outfitDescription+=\"a \".concat(shoesType,\" image, \");}if(uploadedDressImage){const dressImageData=await fileToBase64(uploadedDressImage);parts.push({inlineData:{mimeType:uploadedDressImage.type,data:dressImageData.split(',')[1]}});outfitDescription+=\"a \".concat(dressType,\" image, \");}outfitDescription=outfitDescription.slice(0,-2);// Remove trailing comma and space\nconst textPrompt=\"Given the first image of a person (\".concat(imageDescription,\"), and the following images of an outfit, please completely replace the person's clothes in the first image with the provided outfit. The outfit consists of \").concat(outfitDescription,\". Ensure the new clothes fit the person properly, and the background and person's face remain unchanged.\");parts.unshift({text:textPrompt});payload={contents:[{parts}],generationConfig:{responseModalities:[\"IMAGE\"]},model:\"gemini-2.5-flash-image-preview\"};}// Call your proxy endpoint instead of the original API\nlet response;try{var _result$candidates2,_result$candidates2$,_result$candidates2$$,_result$candidates2$$2,_result$candidates2$$3,_result$candidates2$$4;response=await fetch(IMAGE_GEN_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const result=await response.json();const base64Data=result===null||result===void 0?void 0:(_result$candidates2=result.candidates)===null||_result$candidates2===void 0?void 0:(_result$candidates2$=_result$candidates2[0])===null||_result$candidates2$===void 0?void 0:(_result$candidates2$$=_result$candidates2$.content)===null||_result$candidates2$$===void 0?void 0:(_result$candidates2$$2=_result$candidates2$$.parts)===null||_result$candidates2$$2===void 0?void 0:(_result$candidates2$$3=_result$candidates2$$2.find(p=>p.inlineData))===null||_result$candidates2$$3===void 0?void 0:(_result$candidates2$$4=_result$candidates2$$3.inlineData)===null||_result$candidates2$$4===void 0?void 0:_result$candidates2$$4.data;if(base64Data){setGeneratedImage(\"data:image/png;base64,\".concat(base64Data));}else{setError('Image generation failed. Please try again.');}}catch(e){console.error(\"API call failed:\",e);setError(\"An error occurred: \".concat(e.message));}finally{setLoading(false);}};const updateLook=async()=>{if(!generatedImage||!updatePrompt){setError('Please generate a new look and enter a prompt to update it.');return;}setLoading(true);setError('');try{var _result$candidates3,_result$candidates3$,_result$candidates3$$,_result$candidates3$$2,_result$candidates3$$3,_result$candidates3$$4;const response=await fetch(generatedImage);const blob=await response.blob();const base64Image=await fileToBase64(blob);const payload={contents:[{parts:[{text:\"Update the provided image based on the following instruction. Completely replace any existing clothes with a new look as described: \".concat(updatePrompt,\". Do not alter the background or the person's face in any way unless specified in the prompt.\")},{inlineData:{mimeType:\"image/png\",data:base64Image.split(',')[1]}}]}],generationConfig:{responseModalities:[\"IMAGE\"]},model:\"gemini-2.5-flash-image-preview\"};// Call your proxy endpoint instead of the original API\nconst apiResponse=await fetch(IMAGE_GEN_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!apiResponse.ok){throw new Error(\"HTTP error! status: \".concat(apiResponse.status));}const result=await apiResponse.json();const base64Data=result===null||result===void 0?void 0:(_result$candidates3=result.candidates)===null||_result$candidates3===void 0?void 0:(_result$candidates3$=_result$candidates3[0])===null||_result$candidates3$===void 0?void 0:(_result$candidates3$$=_result$candidates3$.content)===null||_result$candidates3$$===void 0?void 0:(_result$candidates3$$2=_result$candidates3$$.parts)===null||_result$candidates3$$2===void 0?void 0:(_result$candidates3$$3=_result$candidates3$$2.find(p=>p.inlineData))===null||_result$candidates3$$3===void 0?void 0:(_result$candidates3$$4=_result$candidates3$$3.inlineData)===null||_result$candidates3$$4===void 0?void 0:_result$candidates3$$4.data;if(base64Data){setGeneratedImage(\"data:image/png;base64,\".concat(base64Data));}else{setError('Image update failed. Please try again.');}}catch(e){console.error(\"API call failed:\",e);setError(\"An error occurred: \".concat(e.message));}finally{setLoading(false);}};const renderUploadSection=(title,uploadHandler,uploadState,uploadIcon,dropdownOptions,dropdownValue,dropdownHandler)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row items-center justify-center gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"\".concat(title.toLowerCase().replace(/\\s/g,'-'),\"-upload\"),className:\"cursor-pointer bg-green-500 hover:bg-green-600 transition-colors text-white font-semibold py-2 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\",children:[uploadIcon,/*#__PURE__*/_jsx(\"span\",{children:uploadState?\"Change \".concat(title):\"Upload \".concat(title)})]}),/*#__PURE__*/_jsx(\"input\",{id:\"\".concat(title.toLowerCase().replace(/\\s/g,'-'),\"-upload\"),type:\"file\",accept:\"image/png, image/jpeg\",className:\"hidden\",onChange:uploadHandler}),/*#__PURE__*/_jsx(\"select\",{value:dropdownValue,onChange:dropdownHandler,className:\"py-2 px-4 rounded-full bg-white border border-gray-300 text-gray-700 font-medium\",children:dropdownOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))}),uploadState&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\",children:/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(uploadState),alt:title,className:\"max-h-32 rounded-lg object-contain\"})})]});return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 min-h-screen font-sans antialiased text-gray-800 flex flex-col items-center py-12 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-3xl shadow-2xl w-full max-w-2xl text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl md:text-5xl font-extrabold text-blue-600 mb-2\",children:\"Virtual Try-On\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-8 text-lg\",children:\"Upload your photo and try on different accessories or outfits.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"face-image-upload\",className:\"cursor-pointer bg-blue-500 hover:bg-blue-600 transition-colors text-white font-semibold py-3 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\",children:[/*#__PURE__*/_jsx(Camera,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:uploadedFaceImage?'Change Photo':'Upload Your Photo'})]}),/*#__PURE__*/_jsx(\"input\",{id:\"face-image-upload\",type:\"file\",accept:\"image/png, image/jpeg\",className:\"hidden\",onChange:handleFaceImageUpload}),isAnalyzing&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-sm text-gray-500 flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-4 w-4 text-blue-500\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"Analyzing photo...\"})]}),faceImagePreview&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\",children:/*#__PURE__*/_jsx(\"img\",{src:faceImagePreview,alt:\"Uploaded Face\",className:\"max-h-64 rounded-lg object-contain\"})})]}),uploadedFaceImage&&!isAnalyzing&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Choose an Option\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMode('accessory'),className:\"py-2 px-4 rounded-full font-medium transition-all transform hover:scale-105\\n                  \".concat(mode==='accessory'?'bg-blue-600 text-white shadow-lg':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"Choose an Accessory\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMode('outfit'),className:\"py-2 px-4 rounded-full font-medium transition-all transform hover:scale-105\\n                  \".concat(mode==='outfit'?'bg-blue-600 text-white shadow-lg':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"Choose an Outfit\"})]})]}),uploadedFaceImage&&!isAnalyzing&&mode==='accessory'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Upload Your Accessory\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row items-center justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:accessoryType,onChange:e=>setAccessoryType(e.target.value),className:\"py-2 px-4 rounded-full bg-white border border-gray-300 text-gray-700 font-medium\",children:ACCESSORY_TYPES.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"accessory-image-upload\",className:\"cursor-pointer bg-green-500 hover:bg-green-600 transition-colors text-white font-semibold py-2 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\",children:[/*#__PURE__*/_jsx(Upload,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:uploadedAccessoryImage?'Change Accessory':'Upload Accessory'})]}),/*#__PURE__*/_jsx(\"input\",{id:\"accessory-image-upload\",type:\"file\",accept:\"image/png, image/jpeg\",className:\"hidden\",onChange:e=>{setUploadedAccessoryImage(e.target.files[0]||null);}})]}),uploadedAccessoryImage&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\",children:/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(uploadedAccessoryImage),alt:\"Uploaded Accessory\",className:\"max-h-32 rounded-lg object-contain\"})})]}),uploadedFaceImage&&!isAnalyzing&&mode==='outfit'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Upload Your Outfit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[renderUploadSection('Top',e=>{setUploadedTopImage(e.target.files[0]||null);},uploadedTopImage,/*#__PURE__*/_jsx(Shirt,{size:20}),TOP_TYPES,topType,e=>setTopType(e.target.value)),renderUploadSection('Pants',e=>{setUploadedPantsImage(e.target.files[0]||null);},uploadedPantsImage,/*#__PURE__*/_jsx(PawPrint,{size:20}),PANTS_TYPES,pantsType,e=>setPantsType(e.target.value)),renderUploadSection('Shoes',e=>{setUploadedShoesImage(e.target.files[0]||null);},uploadedShoesImage,/*#__PURE__*/_jsx(ShoppingBag,{size:20}),SHOES_TYPES,shoesType,e=>setShoesType(e.target.value)),renderUploadSection('Dress',e=>{setUploadedDressImage(e.target.files[0]||null);},uploadedDressImage,/*#__PURE__*/_jsx(ShoppingBagIcon,{size:20}),DRESS_TYPES,dressType,e=>setDressType(e.target.value))]})]}),uploadedFaceImage&&!isAnalyzing&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"button\",{onClick:generateImage,disabled:loading||mode==='accessory'&&!uploadedAccessoryImage||mode==='outfit'&&!uploadedTopImage&&!uploadedPantsImage&&!uploadedShoesImage&&!uploadedDressImage,className:\"bg-green-500 hover:bg-green-600 transition-colors text-white font-bold py-3 px-8 rounded-full shadow-lg inline-flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Sparkles,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Try It On!\"})]})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 text-red-700 p-4 rounded-lg font-medium mb-8\",children:error}),generatedImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Your New Look\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border-4 border-blue-200 rounded-xl p-2 inline-block\",children:/*#__PURE__*/_jsx(\"img\",{src:generatedImage,alt:\"Generated\",className:\"max-h-[500px] rounded-lg object-contain\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Update Your Look\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full h-24 p-4 rounded-lg border border-gray-300 mb-4 focus:ring-blue-500 focus:border-blue-500 resize-none\",placeholder:\"e.g., 'remove the glasses', 'change the jacket to red', 'add a hat'\",value:updatePrompt,onChange:e=>setUpdatePrompt(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:updateLook,disabled:loading||!updatePrompt,className:\"bg-purple-500 hover:bg-purple-600 transition-colors text-white font-bold py-3 px-8 rounded-full shadow-lg inline-flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 A7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RefreshCw,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Update New Look\"})]})})]})]})]})});}","map":{"version":3,"names":["React","useState","Camera","Upload","Sparkles","Shirt","PawPrint","ShoppingBag","ShoppingBagIcon","RefreshCw","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ACCESSORY_TYPES","TOP_TYPES","PANTS_TYPES","SHOES_TYPES","DRESS_TYPES","fileToBase64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","App","uploadedFaceImage","setUploadedFaceImage","faceImagePreview","setFaceImagePreview","mode","setMode","uploadedAccessoryImage","setUploadedAccessoryImage","accessoryType","setAccessoryType","uploadedTopImage","setUploadedTopImage","topType","setTopType","uploadedPantsImage","setUploadedPantsImage","pantsType","setPantsType","uploadedShoesImage","setUploadedShoesImage","shoesType","setShoesType","uploadedDressImage","setUploadedDressImage","dressType","setDressType","generatedImage","setGeneratedImage","loading","setLoading","setError","updatePrompt","setUpdatePrompt","imageDescription","setImageDescription","isAnalyzing","setIsAnalyzing","WORKER_URL","TEXT_ANALYSIS_ENDPOINT","concat","IMAGE_GEN_ENDPOINT","analyzeImage","_result$candidates","_result$candidates$","_result$candidates$$c","_result$candidates$$c2","_result$candidates$$c3","imageData","payload","contents","parts","text","inlineData","mimeType","type","data","split","model","response","fetch","method","headers","body","JSON","stringify","json","description","candidates","content","e","console","message","handleFaceImageUpload","event","target","files","URL","createObjectURL","generateImage","faceImageData","accessoryImageData","initialPrompt","generationConfig","responseModalities","outfitDescription","topImageData","push","pantsImageData","shoesImageData","dressImageData","slice","textPrompt","unshift","_result$candidates2","_result$candidates2$","_result$candidates2$$","_result$candidates2$$2","_result$candidates2$$3","_result$candidates2$$4","ok","Error","status","base64Data","find","p","updateLook","_result$candidates3","_result$candidates3$","_result$candidates3$$","_result$candidates3$$2","_result$candidates3$$3","_result$candidates3$$4","blob","base64Image","apiResponse","renderUploadSection","title","uploadHandler","uploadState","uploadIcon","dropdownOptions","dropdownValue","dropdownHandler","className","children","htmlFor","toLowerCase","replace","id","accept","onChange","value","map","option","src","alt","size","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","onClick","disabled","placeholder"],"sources":["C:/Users/LHN/Fas/virtual-try-on-app3/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Camera, Upload, Sparkles, Shirt, PawPrint, ShoppingBag, ShoppingBagIcon, RefreshCw } from 'lucide-react';\r\n\r\n// All components, hooks, and logic in one file.\r\n// The main component must be named \"App\" and be the default export.\r\n// Tailwind CSS is used for styling.\r\n\r\nconst ACCESSORY_TYPES = [\r\n  'Earring',\r\n  'Necklace',\r\n  'Ring',\r\n  'Hat',\r\n  'Scarf',\r\n  'Glasses'\r\n];\r\n\r\nconst TOP_TYPES = [\r\n  'blouse',\r\n  't-shirt',\r\n  'shirt',\r\n  'hoodie',\r\n  'sweater',\r\n  'jacket'\r\n];\r\n\r\nconst PANTS_TYPES = [\r\n  'pants',\r\n  'skirt',\r\n  'shorts',\r\n  'jeans',\r\n  'trousers',\r\n  'leggings'\r\n];\r\n\r\nconst SHOES_TYPES = [\r\n  'shoes',\r\n  'sneakers',\r\n  'boots',\r\n  'sandals',\r\n  'heels',\r\n  'flats'\r\n];\r\n\r\nconst DRESS_TYPES = [\r\n  'dress',\r\n  'overalls',\r\n  'jumpsuit'\r\n];\r\n\r\n// Helper function to convert a File object to a base64 string\r\nconst fileToBase64 = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = (error) => reject(error);\r\n    reader.readAsDataURL(file);\r\n  });\r\n};\r\n\r\nexport default function App() {\r\n  const [uploadedFaceImage, setUploadedFaceImage] = useState(null);\r\n  const [faceImagePreview, setFaceImagePreview] = useState(null);\r\n  const [mode, setMode] = useState('accessory'); // 'accessory' or 'outfit'\r\n\r\n  // Accessory state\r\n  const [uploadedAccessoryImage, setUploadedAccessoryImage] = useState(null);\r\n  const [accessoryType, setAccessoryType] = useState(ACCESSORY_TYPES[0]);\r\n\r\n  // Outfit state\r\n  const [uploadedTopImage, setUploadedTopImage] = useState(null);\r\n  const [topType, setTopType] = useState(TOP_TYPES[0]);\r\n  const [uploadedPantsImage, setUploadedPantsImage] = useState(null);\r\n  const [pantsType, setPantsType] = useState(PANTS_TYPES[0]);\r\n  const [uploadedShoesImage, setUploadedShoesImage] = useState(null);\r\n  const [shoesType, setShoesType] = useState(SHOES_TYPES[0]);\r\n  const [uploadedDressImage, setUploadedDressImage] = useState(null);\r\n  const [dressType, setDressType] = useState(DRESS_TYPES[0]);\r\n\r\n  const [generatedImage, setGeneratedImage] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [updatePrompt, setUpdatePrompt] = useState('');\r\n\r\n  // New state to hold the description of the uploaded image\r\n  const [imageDescription, setImageDescription] = useState('');\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n\r\n  // Use the URL of your new Cloudflare Worker here\r\n  const WORKER_URL = \"https://your-worker-name.your-username.workers.dev\";\r\n  const TEXT_ANALYSIS_ENDPOINT = `${WORKER_URL}/analyze-image`; // hypothetical endpoint for clarity\r\n  const IMAGE_GEN_ENDPOINT = `${WORKER_URL}/generate-image`; // hypothetical endpoint for clarity\r\n\r\n  const analyzeImage = async (file) => {\r\n    setIsAnalyzing(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const imageData = await fileToBase64(file);\r\n      const payload = {\r\n        contents: [{\r\n          parts: [\r\n            { text: \"Describe this image in a concise manner, focusing on the person's pose, the type of clothing they are wearing, and the background. Do not try to generate a new image.\" },\r\n            {\r\n              inlineData: {\r\n                mimeType: file.type,\r\n                data: imageData.split(',')[1]\r\n              }\r\n            }\r\n          ]\r\n        }],\r\n        model: \"gemini-2.5-flash-preview-05-20\"\r\n      };\r\n\r\n      // Call your proxy endpoint instead of the original API\r\n      const response = await fetch(TEXT_ANALYSIS_ENDPOINT, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      \r\n      const result = await response.json();\r\n      const description = result?.candidates?.[0]?.content?.parts?.[0]?.text;\r\n      \r\n      if (description) {\r\n        setImageDescription(description);\r\n      } else {\r\n        setError('Image analysis failed.');\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Analysis API call failed:\", e);\r\n      setError(`An analysis error occurred: ${e.message}`);\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n    }\r\n  };\r\n\r\n  const handleFaceImageUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      setUploadedFaceImage(file);\r\n      setFaceImagePreview(URL.createObjectURL(file));\r\n      setGeneratedImage(null);\r\n      analyzeImage(file); // Start the analysis immediately\r\n    }\r\n  };\r\n\r\n  const generateImage = async () => {\r\n    if (!uploadedFaceImage || isAnalyzing) {\r\n      setError('Please upload an image and wait for analysis to complete.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n    setGeneratedImage(null);\r\n    setUpdatePrompt('');\r\n\r\n    const faceImageData = await fileToBase64(uploadedFaceImage);\r\n    let payload;\r\n\r\n    if (mode === 'accessory') {\r\n      if (!uploadedAccessoryImage) {\r\n        setError('Please upload an accessory image.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      const accessoryImageData = await fileToBase64(uploadedAccessoryImage);\r\n      const initialPrompt = `Given the image of a person (${imageDescription}) and the image of a ${accessoryType}, add the ${accessoryType} to the person. Ensure the accessory is appropriately placed and looks realistic. Completely replace any existing accessories and clothing with the new one. Do not alter the person's pose or background.`;\r\n      \r\n      payload = {\r\n        contents: [{\r\n          parts: [\r\n            { text: initialPrompt },\r\n            {\r\n              inlineData: {\r\n                mimeType: uploadedFaceImage.type,\r\n                data: faceImageData.split(',')[1]\r\n              }\r\n            },\r\n            {\r\n              inlineData: {\r\n                mimeType: uploadedAccessoryImage.type,\r\n                data: accessoryImageData.split(',')[1]\r\n              }\r\n            }\r\n          ]\r\n        }],\r\n        generationConfig: {\r\n          responseModalities: [\"IMAGE\"]\r\n        },\r\n        model: \"gemini-2.5-flash-image-preview\"\r\n      };\r\n    } else { // mode === 'outfit'\r\n      if (!uploadedTopImage && !uploadedPantsImage && !uploadedShoesImage && !uploadedDressImage) {\r\n        setError('Please upload at least one outfit item: a top, pants, shoes, or a dress.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      const parts = [{\r\n        inlineData: {\r\n          mimeType: uploadedFaceImage.type,\r\n          data: faceImageData.split(',')[1]\r\n        }\r\n      }];\r\n      \r\n      let outfitDescription = '';\r\n      if (uploadedTopImage) {\r\n        const topImageData = await fileToBase64(uploadedTopImage);\r\n        parts.push({\r\n          inlineData: {\r\n            mimeType: uploadedTopImage.type,\r\n            data: topImageData.split(',')[1]\r\n          }\r\n        });\r\n        outfitDescription += `a ${topType} image, `;\r\n      }\r\n      if (uploadedPantsImage) {\r\n        const pantsImageData = await fileToBase64(uploadedPantsImage);\r\n        parts.push({\r\n          inlineData: {\r\n            mimeType: uploadedPantsImage.type,\r\n            data: pantsImageData.split(',')[1]\r\n          }\r\n        });\r\n        outfitDescription += `a ${pantsType} image, `;\r\n      }\r\n      if (uploadedShoesImage) {\r\n        const shoesImageData = await fileToBase64(uploadedShoesImage);\r\n        parts.push({\r\n          inlineData: {\r\n            mimeType: uploadedShoesImage.type,\r\n            data: shoesImageData.split(',')[1]\r\n          }\r\n        });\r\n        outfitDescription += `a ${shoesType} image, `;\r\n      }\r\n      if (uploadedDressImage) {\r\n        const dressImageData = await fileToBase64(uploadedDressImage);\r\n        parts.push({\r\n          inlineData: {\r\n            mimeType: uploadedDressImage.type,\r\n            data: dressImageData.split(',')[1]\r\n          }\r\n        });\r\n        outfitDescription += `a ${dressType} image, `;\r\n      }\r\n      \r\n      outfitDescription = outfitDescription.slice(0, -2); // Remove trailing comma and space\r\n      const textPrompt = `Given the first image of a person (${imageDescription}), and the following images of an outfit, please completely replace the person's clothes in the first image with the provided outfit. The outfit consists of ${outfitDescription}. Ensure the new clothes fit the person properly, and the background and person's face remain unchanged.`;\r\n      \r\n      parts.unshift({ text: textPrompt });\r\n      \r\n      payload = {\r\n        contents: [{ parts }],\r\n        generationConfig: {\r\n          responseModalities: [\"IMAGE\"]\r\n        },\r\n        model: \"gemini-2.5-flash-image-preview\"\r\n      };\r\n    }\r\n\r\n    // Call your proxy endpoint instead of the original API\r\n    let response;\r\n    try {\r\n      response = await fetch(IMAGE_GEN_ENDPOINT, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      const base64Data = result?.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;\r\n\r\n      if (base64Data) {\r\n        setGeneratedImage(`data:image/png;base64,${base64Data}`);\r\n      } else {\r\n        setError('Image generation failed. Please try again.');\r\n      }\r\n    } catch (e) {\r\n      console.error(\"API call failed:\", e);\r\n      setError(`An error occurred: ${e.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateLook = async () => {\r\n    if (!generatedImage || !updatePrompt) {\r\n      setError('Please generate a new look and enter a prompt to update it.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await fetch(generatedImage);\r\n      const blob = await response.blob();\r\n      const base64Image = await fileToBase64(blob);\r\n\r\n      const payload = {\r\n        contents: [{\r\n          parts: [\r\n            { text: `Update the provided image based on the following instruction. Completely replace any existing clothes with a new look as described: ${updatePrompt}. Do not alter the background or the person's face in any way unless specified in the prompt.` },\r\n            {\r\n              inlineData: {\r\n                mimeType: \"image/png\",\r\n                data: base64Image.split(',')[1]\r\n              }\r\n            }\r\n          ]\r\n        }],\r\n        generationConfig: {\r\n          responseModalities: [\"IMAGE\"]\r\n        },\r\n        model: \"gemini-2.5-flash-image-preview\"\r\n      };\r\n\r\n      // Call your proxy endpoint instead of the original API\r\n      const apiResponse = await fetch(IMAGE_GEN_ENDPOINT, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      if (!apiResponse.ok) {\r\n        throw new Error(`HTTP error! status: ${apiResponse.status}`);\r\n      }\r\n\r\n      const result = await apiResponse.json();\r\n      const base64Data = result?.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;\r\n\r\n      if (base64Data) {\r\n        setGeneratedImage(`data:image/png;base64,${base64Data}`);\r\n      } else {\r\n        setError('Image update failed. Please try again.');\r\n      }\r\n    } catch (e) {\r\n      console.error(\"API call failed:\", e);\r\n      setError(`An error occurred: ${e.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderUploadSection = (title, uploadHandler, uploadState, uploadIcon, dropdownOptions, dropdownValue, dropdownHandler) => (\r\n    <div className=\"flex flex-col md:flex-row items-center justify-center gap-4 mb-4\">\r\n      <label htmlFor={`${title.toLowerCase().replace(/\\s/g, '-')}-upload`} className=\"cursor-pointer bg-green-500 hover:bg-green-600 transition-colors text-white font-semibold py-2 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\">\r\n        {uploadIcon}\r\n        <span>{uploadState ? `Change ${title}` : `Upload ${title}`}</span>\r\n      </label>\r\n      <input\r\n        id={`${title.toLowerCase().replace(/\\s/g, '-')}-upload`}\r\n        type=\"file\"\r\n        accept=\"image/png, image/jpeg\"\r\n        className=\"hidden\"\r\n        onChange={uploadHandler}\r\n      />\r\n      <select\r\n        value={dropdownValue}\r\n        onChange={dropdownHandler}\r\n        className=\"py-2 px-4 rounded-full bg-white border border-gray-300 text-gray-700 font-medium\"\r\n      >\r\n        {dropdownOptions.map((option) => (\r\n          <option key={option} value={option}>{option}</option>\r\n        ))}\r\n      </select>\r\n      {uploadState && (\r\n        <div className=\"mt-4 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\">\r\n          <img src={URL.createObjectURL(uploadState)} alt={title} className=\"max-h-32 rounded-lg object-contain\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen font-sans antialiased text-gray-800 flex flex-col items-center py-12 px-4\">\r\n      <div className=\"bg-white p-8 rounded-3xl shadow-2xl w-full max-w-2xl text-center\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-blue-600 mb-2\">Virtual Try-On</h1>\r\n        <p className=\"text-gray-500 mb-8 text-lg\">Upload your photo and try on different accessories or outfits.</p>\r\n\r\n        {/* Face Image upload and preview section */}\r\n        <div className=\"mb-8\">\r\n          <label htmlFor=\"face-image-upload\" className=\"cursor-pointer bg-blue-500 hover:bg-blue-600 transition-colors text-white font-semibold py-3 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\">\r\n            <Camera size={20} />\r\n            <span>{uploadedFaceImage ? 'Change Photo' : 'Upload Your Photo'}</span>\r\n          </label>\r\n          <input\r\n            id=\"face-image-upload\"\r\n            type=\"file\"\r\n            accept=\"image/png, image/jpeg\"\r\n            className=\"hidden\"\r\n            onChange={handleFaceImageUpload}\r\n          />\r\n          {isAnalyzing && (\r\n            <div className=\"mt-4 text-sm text-gray-500 flex items-center justify-center space-x-2\">\r\n              <svg className=\"animate-spin h-4 w-4 text-blue-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n              </svg>\r\n              <span>Analyzing photo...</span>\r\n            </div>\r\n          )}\r\n          {faceImagePreview && (\r\n            <div className=\"mt-6 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\">\r\n              <img src={faceImagePreview} alt=\"Uploaded Face\" className=\"max-h-64 rounded-lg object-contain\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Mode selection */}\r\n        {uploadedFaceImage && !isAnalyzing && (\r\n          <div className=\"mb-8\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Choose an Option</h2>\r\n            <div className=\"flex flex-wrap justify-center gap-4\">\r\n              <button\r\n                onClick={() => setMode('accessory')}\r\n                className={`py-2 px-4 rounded-full font-medium transition-all transform hover:scale-105\r\n                  ${mode === 'accessory' ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                }`}\r\n              >\r\n                Choose an Accessory\r\n              </button>\r\n              <button\r\n                onClick={() => setMode('outfit')}\r\n                className={`py-2 px-4 rounded-full font-medium transition-all transform hover:scale-105\r\n                  ${mode === 'outfit' ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                }`}\r\n              >\r\n                Choose an Outfit\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Accessory upload section */}\r\n        {uploadedFaceImage && !isAnalyzing && mode === 'accessory' && (\r\n          <div className=\"mb-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Upload Your Accessory</h3>\r\n            <div className=\"flex flex-col md:flex-row items-center justify-center gap-4\">\r\n              <select\r\n                value={accessoryType}\r\n                onChange={(e) => setAccessoryType(e.target.value)}\r\n                className=\"py-2 px-4 rounded-full bg-white border border-gray-300 text-gray-700 font-medium\"\r\n              >\r\n                {ACCESSORY_TYPES.map((type) => (\r\n                  <option key={type} value={type}>{type}</option>\r\n                ))}\r\n              </select>\r\n              <label htmlFor=\"accessory-image-upload\" className=\"cursor-pointer bg-green-500 hover:bg-green-600 transition-colors text-white font-semibold py-2 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\">\r\n                <Upload size={20} />\r\n                <span>{uploadedAccessoryImage ? 'Change Accessory' : 'Upload Accessory'}</span>\r\n              </label>\r\n              <input\r\n                id=\"accessory-image-upload\"\r\n                type=\"file\"\r\n                accept=\"image/png, image/jpeg\"\r\n                className=\"hidden\"\r\n                onChange={(e) => { setUploadedAccessoryImage(e.target.files[0] || null); }}\r\n              />\r\n            </div>\r\n            {uploadedAccessoryImage && (\r\n              <div className=\"mt-4 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\">\r\n                <img src={URL.createObjectURL(uploadedAccessoryImage)} alt=\"Uploaded Accessory\" className=\"max-h-32 rounded-lg object-contain\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Outfit upload section */}\r\n        {uploadedFaceImage && !isAnalyzing && mode === 'outfit' && (\r\n          <div className=\"mb-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Upload Your Outfit</h3>\r\n            <div className=\"space-y-4\">\r\n              {renderUploadSection(\r\n                'Top',\r\n                (e) => { setUploadedTopImage(e.target.files[0] || null); },\r\n                uploadedTopImage,\r\n                <Shirt size={20} />,\r\n                TOP_TYPES,\r\n                topType,\r\n                (e) => setTopType(e.target.value)\r\n              )}\r\n              {renderUploadSection(\r\n                'Pants',\r\n                (e) => { setUploadedPantsImage(e.target.files[0] || null); },\r\n                uploadedPantsImage,\r\n                <PawPrint size={20} />,\r\n                PANTS_TYPES,\r\n                pantsType,\r\n                (e) => setPantsType(e.target.value)\r\n              )}\r\n              {renderUploadSection(\r\n                'Shoes',\r\n                (e) => { setUploadedShoesImage(e.target.files[0] || null); },\r\n                uploadedShoesImage,\r\n                <ShoppingBag size={20} />,\r\n                SHOES_TYPES,\r\n                shoesType,\r\n                (e) => setShoesType(e.target.value)\r\n              )}\r\n               {renderUploadSection(\r\n                'Dress',\r\n                (e) => { setUploadedDressImage(e.target.files[0] || null); },\r\n                uploadedDressImage,\r\n                <ShoppingBagIcon size={20} />,\r\n                DRESS_TYPES,\r\n                dressType,\r\n                (e) => setDressType(e.target.value)\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Generation button and loading state */}\r\n        {uploadedFaceImage && !isAnalyzing && (\r\n          <div className=\"mb-8\">\r\n            <button\r\n              onClick={generateImage}\r\n              disabled={loading || (mode === 'accessory' && !uploadedAccessoryImage) || (mode === 'outfit' && (!uploadedTopImage && !uploadedPantsImage && !uploadedShoesImage && !uploadedDressImage))}\r\n              className=\"bg-green-500 hover:bg-green-600 transition-colors text-white font-bold py-3 px-8 rounded-full shadow-lg inline-flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {loading ? (\r\n                <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n              ) : (\r\n                <>\r\n                  <Sparkles size={20} />\r\n                  <span>Try It On!</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Display results or error */}\r\n        {error && (\r\n          <div className=\"bg-red-100 text-red-700 p-4 rounded-lg font-medium mb-8\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {generatedImage && (\r\n          <div className=\"mt-8\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Your New Look</h2>\r\n            <div className=\"border-4 border-blue-200 rounded-xl p-2 inline-block\">\r\n              <img src={generatedImage} alt=\"Generated\" className=\"max-h-[500px] rounded-lg object-contain\" />\r\n            </div>\r\n\r\n            {/* New section for updating the look */}\r\n            <div className=\"mt-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\">\r\n              <h3 className=\"text-lg font-semibold mb-4\">Update Your Look</h3>\r\n              <textarea\r\n                className=\"w-full h-24 p-4 rounded-lg border border-gray-300 mb-4 focus:ring-blue-500 focus:border-blue-500 resize-none\"\r\n                placeholder=\"e.g., 'remove the glasses', 'change the jacket to red', 'add a hat'\"\r\n                value={updatePrompt}\r\n                onChange={(e) => setUpdatePrompt(e.target.value)}\r\n              />\r\n              <button\r\n                onClick={updateLook}\r\n                disabled={loading || !updatePrompt}\r\n                className=\"bg-purple-500 hover:bg-purple-600 transition-colors text-white font-bold py-3 px-8 rounded-full shadow-lg inline-flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {loading ? (\r\n                  <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 A7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                  </svg>\r\n                ) : (\r\n                  <>\r\n                    <RefreshCw size={20} />\r\n                    <span>Update New Look</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}