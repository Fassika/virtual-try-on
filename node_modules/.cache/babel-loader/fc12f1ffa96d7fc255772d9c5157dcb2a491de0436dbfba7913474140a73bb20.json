{"ast":null,"code":"var _jsxFileName = \"C:\\\\virtual-try-on-app3\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Camera, Upload, Sparkles, Shirt, PawPrint, ShoppingBag, ShoppingBagIcon, RefreshCw } from 'lucide-react';\n\n// All components, hooks, and logic in one file.\n// The main component must be named \"App\" and be the default export.\n// Tailwind CSS is used for styling.\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ACCESSORY_TYPES = ['Earring', 'Necklace', 'Ring', 'Hat', 'Scarf', 'Glasses'];\nconst TOP_TYPES = ['blouse', 't-shirt', 'shirt', 'hoodie', 'sweater', 'jacket'];\nconst PANTS_TYPES = ['pants', 'skirt', 'shorts', 'jeans', 'trousers', 'leggings'];\nconst SHOES_TYPES = ['shoes', 'sneakers', 'boots', 'sandals', 'heels', 'flats'];\nconst DRESS_TYPES = ['dress', 'overalls', 'jumpsuit'];\n\n// Helper function to convert a File object to a base64 string\nconst fileToBase64 = file => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n    reader.readAsDataURL(file);\n  });\n};\nexport default function App() {\n  _s();\n  const [uploadedFaceImage, setUploadedFaceImage] = useState(null);\n  const [faceImagePreview, setFaceImagePreview] = useState(null);\n  const [mode, setMode] = useState('accessory'); // 'accessory' or 'outfit'\n\n  // Accessory state\n  const [uploadedAccessoryImage, setUploadedAccessoryImage] = useState(null);\n  const [accessoryType, setAccessoryType] = useState(ACCESSORY_TYPES[0]);\n\n  // Outfit state\n  const [uploadedTopImage, setUploadedTopImage] = useState(null);\n  const [topType, setTopType] = useState(TOP_TYPES[0]);\n  const [uploadedPantsImage, setUploadedPantsImage] = useState(null);\n  const [pantsType, setPantsType] = useState(PANTS_TYPES[0]);\n  const [uploadedShoesImage, setUploadedShoesImage] = useState(null);\n  const [shoesType, setShoesType] = useState(SHOES_TYPES[0]);\n  const [uploadedDressImage, setUploadedDressImage] = useState(null);\n  const [dressType, setDressType] = useState(DRESS_TYPES[0]);\n  const [generatedImage, setGeneratedImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [updatePrompt, setUpdatePrompt] = useState('');\n\n  // New state to hold the description of the uploaded image\n  const [imageDescription, setImageDescription] = useState('');\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n\n  // !!! IMPORTANT: REPLACE THIS URL WITH YOUR CLOUDFLARE WORKER URL !!!\n  // Example: \"https://virtual-try-on-proxy.YOUR_USERNAME.workers.dev\"\n  const WORKER_URL = \"https://virtual-try-on-d1b.pages.dev/\";\n  const TEXT_ANALYSIS_ENDPOINT = `${WORKER_URL}/analyze-image`;\n  const IMAGE_GEN_ENDPOINT = `${WORKER_URL}/generate-image`;\n\n  // --- BEGIN API CALL HANDLERS ---\n\n  const analyzeImage = async file => {\n    setIsAnalyzing(true);\n    setError('');\n    try {\n      var _result$candidates, _result$candidates$, _result$candidates$$c, _result$candidates$$c2, _result$candidates$$c3;\n      const imageData = await fileToBase64(file);\n      const payload = {\n        contents: [{\n          parts: [{\n            text: \"Describe this image in a concise manner, focusing on the person's pose, the type of clothing they are wearing, and the background. Do not try to generate a new image.\"\n          }, {\n            inlineData: {\n              mimeType: file.type,\n              data: imageData.split(',')[1]\n            }\n          }]\n        }],\n        model: \"gemini-2.5-flash-preview-05-20\"\n      };\n\n      // Call the proxy endpoint\n      const response = await fetch(TEXT_ANALYSIS_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      const description = result === null || result === void 0 ? void 0 : (_result$candidates = result.candidates) === null || _result$candidates === void 0 ? void 0 : (_result$candidates$ = _result$candidates[0]) === null || _result$candidates$ === void 0 ? void 0 : (_result$candidates$$c = _result$candidates$.content) === null || _result$candidates$$c === void 0 ? void 0 : (_result$candidates$$c2 = _result$candidates$$c.parts) === null || _result$candidates$$c2 === void 0 ? void 0 : (_result$candidates$$c3 = _result$candidates$$c2[0]) === null || _result$candidates$$c3 === void 0 ? void 0 : _result$candidates$$c3.text;\n      if (description) {\n        setImageDescription(description);\n      } else if (result.error) {\n        setError(`Analysis failed: ${result.error}`);\n      } else {\n        setError('Image analysis failed: Could not retrieve description.');\n      }\n    } catch (e) {\n      console.error(\"Analysis API call failed:\", e);\n      setError(`An analysis error occurred: ${e.message}`);\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n  const handleFaceImageUpload = event => {\n    const file = event.target.files[0];\n    if (file) {\n      setUploadedFaceImage(file);\n      setFaceImagePreview(URL.createObjectURL(file));\n      setGeneratedImage(null);\n      analyzeImage(file); // Start the analysis immediately\n    }\n  };\n  const generateImage = async () => {\n    if (!uploadedFaceImage || isAnalyzing) {\n      setError('Please upload an image and wait for analysis to complete.');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    setGeneratedImage(null);\n    setUpdatePrompt('');\n    const faceImageData = await fileToBase64(uploadedFaceImage);\n    let payload;\n    if (mode === 'accessory') {\n      if (!uploadedAccessoryImage) {\n        setError('Please upload an accessory image.');\n        setLoading(false);\n        return;\n      }\n      const accessoryImageData = await fileToBase64(uploadedAccessoryImage);\n      const initialPrompt = `Given the image of a person (${imageDescription}) and the image of a ${accessoryType}, add the ${accessoryType} to the person. Ensure the accessory is appropriately placed and looks realistic. Completely replace any existing accessories and clothing with the new one. Do not alter the person's pose or background.`;\n      payload = {\n        contents: [{\n          parts: [{\n            text: initialPrompt\n          }, {\n            inlineData: {\n              mimeType: uploadedFaceImage.type,\n              data: faceImageData.split(',')[1]\n            }\n          }, {\n            inlineData: {\n              mimeType: uploadedAccessoryImage.type,\n              data: accessoryImageData.split(',')[1]\n            }\n          }]\n        }],\n        generationConfig: {\n          responseModalities: [\"IMAGE\"]\n        },\n        model: \"gemini-2.5-flash-image-preview\"\n      };\n    } else {\n      // mode === 'outfit'\n      if (!uploadedTopImage && !uploadedPantsImage && !uploadedShoesImage && !uploadedDressImage) {\n        setError('Please upload at least one outfit item: a top, pants, shoes, or a dress.');\n        setLoading(false);\n        return;\n      }\n      const parts = [{\n        inlineData: {\n          mimeType: uploadedFaceImage.type,\n          data: faceImageData.split(',')[1]\n        }\n      }];\n      let outfitDescription = '';\n      if (uploadedTopImage) {\n        const topImageData = await fileToBase64(uploadedTopImage);\n        parts.push({\n          inlineData: {\n            mimeType: uploadedTopImage.type,\n            data: topImageData.split(',')[1]\n          }\n        });\n        outfitDescription += `a ${topType} image, `;\n      }\n      if (uploadedPantsImage) {\n        const pantsImageData = await fileToBase64(uploadedPantsImage);\n        parts.push({\n          inlineData: {\n            mimeType: uploadedPantsImage.type,\n            data: pantsImageData.split(',')[1]\n          }\n        });\n        outfitDescription += `a ${pantsType} image, `;\n      }\n      if (uploadedShoesImage) {\n        const shoesImageData = await fileToBase64(uploadedShoesImage);\n        parts.push({\n          inlineData: {\n            mimeType: uploadedShoesImage.type,\n            data: shoesImageData.split(',')[1]\n          }\n        });\n        outfitDescription += `a ${shoesType} image, `;\n      }\n      if (uploadedDressImage) {\n        const dressImageData = await fileToBase64(uploadedDressImage);\n        parts.push({\n          inlineData: {\n            mimeType: uploadedDressImage.type,\n            data: dressImageData.split(',')[1]\n          }\n        });\n        outfitDescription += `a ${dressType} image, `;\n      }\n      outfitDescription = outfitDescription.slice(0, -2); // Remove trailing comma and space\n      const textPrompt = `Given the first image of a person (${imageDescription}), and the following images of an outfit, please completely replace the person's clothes in the first image with the provided outfit. The outfit consists of ${outfitDescription}. Ensure the new clothes fit the person properly, and the background and person's face remain unchanged.`;\n      parts.unshift({\n        text: textPrompt\n      });\n      payload = {\n        contents: [{\n          parts\n        }],\n        generationConfig: {\n          responseModalities: [\"IMAGE\"]\n        },\n        model: \"gemini-2.5-flash-image-preview\"\n      };\n    }\n\n    // Call the proxy endpoint\n    let response;\n    try {\n      var _result$candidates2, _result$candidates2$, _result$candidates2$$, _result$candidates2$$2, _result$candidates2$$3, _result$candidates2$$4;\n      response = await fetch(IMAGE_GEN_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const result = await response.json();\n      if (result.error) {\n        throw new Error(result.error);\n      }\n      const base64Data = result === null || result === void 0 ? void 0 : (_result$candidates2 = result.candidates) === null || _result$candidates2 === void 0 ? void 0 : (_result$candidates2$ = _result$candidates2[0]) === null || _result$candidates2$ === void 0 ? void 0 : (_result$candidates2$$ = _result$candidates2$.content) === null || _result$candidates2$$ === void 0 ? void 0 : (_result$candidates2$$2 = _result$candidates2$$.parts) === null || _result$candidates2$$2 === void 0 ? void 0 : (_result$candidates2$$3 = _result$candidates2$$2.find(p => p.inlineData)) === null || _result$candidates2$$3 === void 0 ? void 0 : (_result$candidates2$$4 = _result$candidates2$$3.inlineData) === null || _result$candidates2$$4 === void 0 ? void 0 : _result$candidates2$$4.data;\n      if (base64Data) {\n        setGeneratedImage(`data:image/png;base64,${base64Data}`);\n      } else {\n        setError('Image generation failed. Please try again.');\n      }\n    } catch (e) {\n      console.error(\"API call failed:\", e);\n      setError(`An error occurred during image generation: ${e.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateLook = async () => {\n    if (!generatedImage || !updatePrompt) {\n      setError('Please generate a new look and enter a prompt to update it.');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      var _result$candidates3, _result$candidates3$, _result$candidates3$$, _result$candidates3$$2, _result$candidates3$$3, _result$candidates3$$4;\n      const response = await fetch(generatedImage);\n      const blob = await response.blob();\n      const base64Image = await fileToBase64(blob);\n      const payload = {\n        contents: [{\n          parts: [{\n            text: `Update the provided image based on the following instruction. Completely replace any existing clothes with a new look as described: ${updatePrompt}. Do not alter the background or the person's face in any way unless specified in the prompt.`\n          }, {\n            inlineData: {\n              mimeType: \"image/png\",\n              data: base64Image.split(',')[1]\n            }\n          }]\n        }],\n        generationConfig: {\n          responseModalities: [\"IMAGE\"]\n        },\n        model: \"gemini-2.5-flash-image-preview\"\n      };\n\n      // Call the proxy endpoint\n      const apiResponse = await fetch(IMAGE_GEN_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!apiResponse.ok) {\n        throw new Error(`HTTP error! status: ${apiResponse.status}`);\n      }\n      const result = await apiResponse.json();\n      if (result.error) {\n        throw new Error(result.error);\n      }\n      const base64Data = result === null || result === void 0 ? void 0 : (_result$candidates3 = result.candidates) === null || _result$candidates3 === void 0 ? void 0 : (_result$candidates3$ = _result$candidates3[0]) === null || _result$candidates3$ === void 0 ? void 0 : (_result$candidates3$$ = _result$candidates3$.content) === null || _result$candidates3$$ === void 0 ? void 0 : (_result$candidates3$$2 = _result$candidates3$$.parts) === null || _result$candidates3$$2 === void 0 ? void 0 : (_result$candidates3$$3 = _result$candidates3$$2.find(p => p.inlineData)) === null || _result$candidates3$$3 === void 0 ? void 0 : (_result$candidates3$$4 = _result$candidates3$$3.inlineData) === null || _result$candidates3$$4 === void 0 ? void 0 : _result$candidates3$$4.data;\n      if (base64Data) {\n        setGeneratedImage(`data:image/png;base64,${base64Data}`);\n      } else {\n        setError('Image update failed. Please try again.');\n      }\n    } catch (e) {\n      console.error(\"API call failed:\", e);\n      setError(`An error occurred during image update: ${e.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- END API CALL HANDLERS ---\n\n  const renderUploadSection = (title, uploadHandler, uploadState, uploadIcon, dropdownOptions, dropdownValue, dropdownHandler) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col md:flex-row items-center justify-center gap-4 mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: `${title.toLowerCase().replace(/\\s/g, '-')}-upload`,\n      className: \"cursor-pointer bg-green-500 hover:bg-green-600 transition-colors text-white font-semibold py-2 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\",\n      children: [uploadIcon, /*#__PURE__*/_jsxDEV(\"span\", {\n        children: uploadState ? `Change ${title}` : `Upload ${title}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: `${title.toLowerCase().replace(/\\s/g, '-')}-upload`,\n      type: \"file\",\n      accept: \"image/png, image/jpeg\",\n      className: \"hidden\",\n      onChange: uploadHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: dropdownValue,\n      onChange: dropdownHandler,\n      className: \"py-2 px-4 rounded-full bg-white border border-gray-300 text-gray-700 font-medium\",\n      children: dropdownOptions.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: option,\n        children: option\n      }, option, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this), uploadState && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: URL.createObjectURL(uploadState),\n        alt: title,\n        className: \"max-h-32 rounded-lg object-contain\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-100 min-h-screen font-sans antialiased text-gray-800 flex flex-col items-center py-12 px-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-8 rounded-3xl shadow-2xl w-full max-w-2xl text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl md:text-5xl font-extrabold text-blue-600 mb-2\",\n        children: \"Virtual Try-On\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 mb-8 text-lg\",\n        children: \"Upload your photo and try on different accessories or outfits.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"face-image-upload\",\n          className: \"cursor-pointer bg-blue-500 hover:bg-blue-600 transition-colors text-white font-semibold py-3 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\",\n          children: [/*#__PURE__*/_jsxDEV(Camera, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: uploadedFaceImage ? 'Change Photo' : 'Upload Your Photo'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"face-image-upload\",\n          type: \"file\",\n          accept: \"image/png, image/jpeg\",\n          className: \"hidden\",\n          onChange: handleFaceImageUpload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this), isAnalyzing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 text-sm text-gray-500 flex items-center justify-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"animate-spin h-4 w-4 text-blue-500\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              className: \"opacity-25\",\n              cx: \"12\",\n              cy: \"12\",\n              r: \"10\",\n              stroke: \"currentColor\",\n              strokeWidth: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              className: \"opacity-75\",\n              fill: \"currentColor\",\n              d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Analyzing photo...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this), faceImagePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: faceImagePreview,\n            alt: \"Uploaded Face\",\n            className: \"max-h-64 rounded-lg object-contain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), uploadedFaceImage && !isAnalyzing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold mb-4\",\n          children: \"Choose an Option\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap justify-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMode('accessory'),\n            className: `py-2 px-4 rounded-full font-medium transition-all transform hover:scale-105\n                  ${mode === 'accessory' ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`,\n            children: \"Choose an Accessory\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMode('outfit'),\n            className: `py-2 px-4 rounded-full font-medium transition-all transform hover:scale-105\n                  ${mode === 'outfit' ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`,\n            children: \"Choose an Outfit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this), uploadedFaceImage && !isAnalyzing && mode === 'accessory' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"Upload Your Accessory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col md:flex-row items-center justify-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            value: accessoryType,\n            onChange: e => setAccessoryType(e.target.value),\n            className: \"py-2 px-4 rounded-full bg-white border border-gray-300 text-gray-700 font-medium\",\n            children: ACCESSORY_TYPES.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: type,\n              children: type\n            }, type, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"accessory-image-upload\",\n            className: \"cursor-pointer bg-green-500 hover:bg-green-600 transition-colors text-white font-semibold py-2 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\",\n            children: [/*#__PURE__*/_jsxDEV(Upload, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: uploadedAccessoryImage ? 'Change Accessory' : 'Upload Accessory'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"accessory-image-upload\",\n            type: \"file\",\n            accept: \"image/png, image/jpeg\",\n            className: \"hidden\",\n            onChange: e => {\n              setUploadedAccessoryImage(e.target.files[0] || null);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 13\n        }, this), uploadedAccessoryImage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: URL.createObjectURL(uploadedAccessoryImage),\n            alt: \"Uploaded Accessory\",\n            className: \"max-h-32 rounded-lg object-contain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 11\n      }, this), uploadedFaceImage && !isAnalyzing && mode === 'outfit' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"Upload Your Outfit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [renderUploadSection('Top', e => {\n            setUploadedTopImage(e.target.files[0] || null);\n          }, uploadedTopImage, /*#__PURE__*/_jsxDEV(Shirt, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 17\n          }, this), TOP_TYPES, topType, e => setTopType(e.target.value)), renderUploadSection('Pants', e => {\n            setUploadedPantsImage(e.target.files[0] || null);\n          }, uploadedPantsImage, /*#__PURE__*/_jsxDEV(PawPrint, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 17\n          }, this), PANTS_TYPES, pantsType, e => setPantsType(e.target.value)), renderUploadSection('Shoes', e => {\n            setUploadedShoesImage(e.target.files[0] || null);\n          }, uploadedShoesImage, /*#__PURE__*/_jsxDEV(ShoppingBag, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 17\n          }, this), SHOES_TYPES, shoesType, e => setShoesType(e.target.value)), renderUploadSection('Dress', e => {\n            setUploadedDressImage(e.target.files[0] || null);\n          }, uploadedDressImage, /*#__PURE__*/_jsxDEV(ShoppingBagIcon, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 17\n          }, this), DRESS_TYPES, dressType, e => setDressType(e.target.value))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 11\n      }, this), uploadedFaceImage && !isAnalyzing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: generateImage,\n          disabled: loading || mode === 'accessory' && !uploadedAccessoryImage || mode === 'outfit' && !uploadedTopImage && !uploadedPantsImage && !uploadedShoesImage && !uploadedDressImage,\n          className: \"bg-green-500 hover:bg-green-600 transition-colors text-white font-bold py-3 px-8 rounded-full shadow-lg inline-flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n          children: loading ? /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"animate-spin h-5 w-5 text-white\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              className: \"opacity-25\",\n              cx: \"12\",\n              cy: \"12\",\n              r: \"10\",\n              stroke: \"currentColor\",\n              strokeWidth: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              className: \"opacity-75\",\n              fill: \"currentColor\",\n              d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Try It On!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 text-red-700 p-4 rounded-lg font-medium mb-8\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 11\n      }, this), generatedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold mb-4\",\n          children: \"Your New Look\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-4 border-blue-200 rounded-xl p-2 inline-block\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: generatedImage,\n            alt: \"Generated\",\n            className: \"max-h-[500px] rounded-lg object-contain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold mb-4\",\n            children: \"Update Your Look\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"w-full h-24 p-4 rounded-lg border border-gray-300 mb-4 focus:ring-blue-500 focus:border-blue-500 resize-none\",\n            placeholder: \"e.g., 'remove the glasses', 'change the jacket to red', 'add a hat'\",\n            value: updatePrompt,\n            onChange: e => setUpdatePrompt(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: updateLook,\n            disabled: loading || !updatePrompt,\n            className: \"bg-purple-500 hover:bg-purple-600 transition-colors text-white font-bold py-3 px-8 rounded-full shadow-lg inline-flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: loading ? /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"animate-spin h-5 w-5 text-white\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                className: \"opacity-25\",\n                cx: \"12\",\n                cy: \"12\",\n                r: \"10\",\n                stroke: \"currentColor\",\n                strokeWidth: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                className: \"opacity-75\",\n                fill: \"currentColor\",\n                d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 A7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Update New Look\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 397,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"hMyjjoyUmEQzRB5mQzG4sFTkFkw=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Camera","Upload","Sparkles","Shirt","PawPrint","ShoppingBag","ShoppingBagIcon","RefreshCw","jsxDEV","_jsxDEV","Fragment","_Fragment","ACCESSORY_TYPES","TOP_TYPES","PANTS_TYPES","SHOES_TYPES","DRESS_TYPES","fileToBase64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","App","_s","uploadedFaceImage","setUploadedFaceImage","faceImagePreview","setFaceImagePreview","mode","setMode","uploadedAccessoryImage","setUploadedAccessoryImage","accessoryType","setAccessoryType","uploadedTopImage","setUploadedTopImage","topType","setTopType","uploadedPantsImage","setUploadedPantsImage","pantsType","setPantsType","uploadedShoesImage","setUploadedShoesImage","shoesType","setShoesType","uploadedDressImage","setUploadedDressImage","dressType","setDressType","generatedImage","setGeneratedImage","loading","setLoading","setError","updatePrompt","setUpdatePrompt","imageDescription","setImageDescription","isAnalyzing","setIsAnalyzing","WORKER_URL","TEXT_ANALYSIS_ENDPOINT","IMAGE_GEN_ENDPOINT","analyzeImage","_result$candidates","_result$candidates$","_result$candidates$$c","_result$candidates$$c2","_result$candidates$$c3","imageData","payload","contents","parts","text","inlineData","mimeType","type","data","split","model","response","fetch","method","headers","body","JSON","stringify","json","description","candidates","content","e","console","message","handleFaceImageUpload","event","target","files","URL","createObjectURL","generateImage","faceImageData","accessoryImageData","initialPrompt","generationConfig","responseModalities","outfitDescription","topImageData","push","pantsImageData","shoesImageData","dressImageData","slice","textPrompt","unshift","_result$candidates2","_result$candidates2$","_result$candidates2$$","_result$candidates2$$2","_result$candidates2$$3","_result$candidates2$$4","ok","Error","status","base64Data","find","p","updateLook","_result$candidates3","_result$candidates3$","_result$candidates3$$","_result$candidates3$$2","_result$candidates3$$3","_result$candidates3$$4","blob","base64Image","apiResponse","renderUploadSection","title","uploadHandler","uploadState","uploadIcon","dropdownOptions","dropdownValue","dropdownHandler","className","children","htmlFor","toLowerCase","replace","fileName","_jsxFileName","lineNumber","columnNumber","id","accept","onChange","value","map","option","src","alt","size","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","onClick","disabled","placeholder","_c","$RefreshReg$"],"sources":["C:/virtual-try-on-app3/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Camera, Upload, Sparkles, Shirt, PawPrint, ShoppingBag, ShoppingBagIcon, RefreshCw } from 'lucide-react';\r\n\r\n// All components, hooks, and logic in one file.\r\n// The main component must be named \"App\" and be the default export.\r\n// Tailwind CSS is used for styling.\r\n\r\nconst ACCESSORY_TYPES = [\r\n  'Earring',\r\n  'Necklace',\r\n  'Ring',\r\n  'Hat',\r\n  'Scarf',\r\n  'Glasses'\r\n];\r\n\r\nconst TOP_TYPES = [\r\n  'blouse',\r\n  't-shirt',\r\n  'shirt',\r\n  'hoodie',\r\n  'sweater',\r\n  'jacket'\r\n];\r\n\r\nconst PANTS_TYPES = [\r\n  'pants',\r\n  'skirt',\r\n  'shorts',\r\n  'jeans',\r\n  'trousers',\r\n  'leggings'\r\n];\r\n\r\nconst SHOES_TYPES = [\r\n  'shoes',\r\n  'sneakers',\r\n  'boots',\r\n  'sandals',\r\n  'heels',\r\n  'flats'\r\n];\r\n\r\nconst DRESS_TYPES = [\r\n  'dress',\r\n  'overalls',\r\n  'jumpsuit'\r\n];\r\n\r\n// Helper function to convert a File object to a base64 string\r\nconst fileToBase64 = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = (error) => reject(error);\r\n    reader.readAsDataURL(file);\r\n  });\r\n};\r\n\r\nexport default function App() {\r\n  const [uploadedFaceImage, setUploadedFaceImage] = useState(null);\r\n  const [faceImagePreview, setFaceImagePreview] = useState(null);\r\n  const [mode, setMode] = useState('accessory'); // 'accessory' or 'outfit'\r\n\r\n  // Accessory state\r\n  const [uploadedAccessoryImage, setUploadedAccessoryImage] = useState(null);\r\n  const [accessoryType, setAccessoryType] = useState(ACCESSORY_TYPES[0]);\r\n\r\n  // Outfit state\r\n  const [uploadedTopImage, setUploadedTopImage] = useState(null);\r\n  const [topType, setTopType] = useState(TOP_TYPES[0]);\r\n  const [uploadedPantsImage, setUploadedPantsImage] = useState(null);\r\n  const [pantsType, setPantsType] = useState(PANTS_TYPES[0]);\r\n  const [uploadedShoesImage, setUploadedShoesImage] = useState(null);\r\n  const [shoesType, setShoesType] = useState(SHOES_TYPES[0]);\r\n  const [uploadedDressImage, setUploadedDressImage] = useState(null);\r\n  const [dressType, setDressType] = useState(DRESS_TYPES[0]);\r\n\r\n  const [generatedImage, setGeneratedImage] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [updatePrompt, setUpdatePrompt] = useState('');\r\n\r\n  // New state to hold the description of the uploaded image\r\n  const [imageDescription, setImageDescription] = useState('');\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n\r\n  // !!! IMPORTANT: REPLACE THIS URL WITH YOUR CLOUDFLARE WORKER URL !!!\r\n  // Example: \"https://virtual-try-on-proxy.YOUR_USERNAME.workers.dev\"\r\n  const WORKER_URL = \"https://virtual-try-on-d1b.pages.dev/\"; \r\n  const TEXT_ANALYSIS_ENDPOINT = `${WORKER_URL}/analyze-image`;\r\n  const IMAGE_GEN_ENDPOINT = `${WORKER_URL}/generate-image`;\r\n\r\n  // --- BEGIN API CALL HANDLERS ---\r\n\r\n  const analyzeImage = async (file) => {\r\n    setIsAnalyzing(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const imageData = await fileToBase64(file);\r\n      const payload = {\r\n        contents: [{\r\n          parts: [\r\n            { text: \"Describe this image in a concise manner, focusing on the person's pose, the type of clothing they are wearing, and the background. Do not try to generate a new image.\" },\r\n            {\r\n              inlineData: {\r\n                mimeType: file.type,\r\n                data: imageData.split(',')[1]\r\n              }\r\n            }\r\n          ]\r\n        }],\r\n        model: \"gemini-2.5-flash-preview-05-20\"\r\n      };\r\n\r\n      // Call the proxy endpoint\r\n      const response = await fetch(TEXT_ANALYSIS_ENDPOINT, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      \r\n      const result = await response.json();\r\n      const description = result?.candidates?.[0]?.content?.parts?.[0]?.text;\r\n      \r\n      if (description) {\r\n        setImageDescription(description);\r\n      } else if (result.error) {\r\n         setError(`Analysis failed: ${result.error}`);\r\n      } else {\r\n        setError('Image analysis failed: Could not retrieve description.');\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Analysis API call failed:\", e);\r\n      setError(`An analysis error occurred: ${e.message}`);\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n    }\r\n  };\r\n\r\n  const handleFaceImageUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      setUploadedFaceImage(file);\r\n      setFaceImagePreview(URL.createObjectURL(file));\r\n      setGeneratedImage(null);\r\n      analyzeImage(file); // Start the analysis immediately\r\n    }\r\n  };\r\n\r\n  const generateImage = async () => {\r\n    if (!uploadedFaceImage || isAnalyzing) {\r\n      setError('Please upload an image and wait for analysis to complete.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n    setGeneratedImage(null);\r\n    setUpdatePrompt('');\r\n\r\n    const faceImageData = await fileToBase64(uploadedFaceImage);\r\n    let payload;\r\n\r\n    if (mode === 'accessory') {\r\n      if (!uploadedAccessoryImage) {\r\n        setError('Please upload an accessory image.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      const accessoryImageData = await fileToBase64(uploadedAccessoryImage);\r\n      const initialPrompt = `Given the image of a person (${imageDescription}) and the image of a ${accessoryType}, add the ${accessoryType} to the person. Ensure the accessory is appropriately placed and looks realistic. Completely replace any existing accessories and clothing with the new one. Do not alter the person's pose or background.`;\r\n      \r\n      payload = {\r\n        contents: [{\r\n          parts: [\r\n            { text: initialPrompt },\r\n            {\r\n              inlineData: {\r\n                mimeType: uploadedFaceImage.type,\r\n                data: faceImageData.split(',')[1]\r\n              }\r\n            },\r\n            {\r\n              inlineData: {\r\n                mimeType: uploadedAccessoryImage.type,\r\n                data: accessoryImageData.split(',')[1]\r\n              }\r\n            }\r\n          ]\r\n        }],\r\n        generationConfig: {\r\n          responseModalities: [\"IMAGE\"]\r\n        },\r\n        model: \"gemini-2.5-flash-image-preview\"\r\n      };\r\n    } else { // mode === 'outfit'\r\n      if (!uploadedTopImage && !uploadedPantsImage && !uploadedShoesImage && !uploadedDressImage) {\r\n        setError('Please upload at least one outfit item: a top, pants, shoes, or a dress.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      const parts = [{\r\n        inlineData: {\r\n          mimeType: uploadedFaceImage.type,\r\n          data: faceImageData.split(',')[1]\r\n        }\r\n      }];\r\n      \r\n      let outfitDescription = '';\r\n      if (uploadedTopImage) {\r\n        const topImageData = await fileToBase64(uploadedTopImage);\r\n        parts.push({\r\n          inlineData: {\r\n            mimeType: uploadedTopImage.type,\r\n            data: topImageData.split(',')[1]\r\n          }\r\n        });\r\n        outfitDescription += `a ${topType} image, `;\r\n      }\r\n      if (uploadedPantsImage) {\r\n        const pantsImageData = await fileToBase64(uploadedPantsImage);\r\n        parts.push({\r\n          inlineData: {\r\n            mimeType: uploadedPantsImage.type,\r\n            data: pantsImageData.split(',')[1]\r\n          }\r\n        });\r\n        outfitDescription += `a ${pantsType} image, `;\r\n      }\r\n      if (uploadedShoesImage) {\r\n        const shoesImageData = await fileToBase64(uploadedShoesImage);\r\n        parts.push({\r\n          inlineData: {\r\n            mimeType: uploadedShoesImage.type,\r\n            data: shoesImageData.split(',')[1]\r\n          }\r\n        });\r\n        outfitDescription += `a ${shoesType} image, `;\r\n      }\r\n      if (uploadedDressImage) {\r\n        const dressImageData = await fileToBase64(uploadedDressImage);\r\n        parts.push({\r\n          inlineData: {\r\n            mimeType: uploadedDressImage.type,\r\n            data: dressImageData.split(',')[1]\r\n          }\r\n        });\r\n        outfitDescription += `a ${dressType} image, `;\r\n      }\r\n      \r\n      outfitDescription = outfitDescription.slice(0, -2); // Remove trailing comma and space\r\n      const textPrompt = `Given the first image of a person (${imageDescription}), and the following images of an outfit, please completely replace the person's clothes in the first image with the provided outfit. The outfit consists of ${outfitDescription}. Ensure the new clothes fit the person properly, and the background and person's face remain unchanged.`;\r\n      \r\n      parts.unshift({ text: textPrompt });\r\n      \r\n      payload = {\r\n        contents: [{ parts }],\r\n        generationConfig: {\r\n          responseModalities: [\"IMAGE\"]\r\n        },\r\n        model: \"gemini-2.5-flash-image-preview\"\r\n      };\r\n    }\r\n\r\n    // Call the proxy endpoint\r\n    let response;\r\n    try {\r\n      response = await fetch(IMAGE_GEN_ENDPOINT, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n       if (result.error) {\r\n        throw new Error(result.error);\r\n      }\r\n      const base64Data = result?.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;\r\n\r\n      if (base64Data) {\r\n        setGeneratedImage(`data:image/png;base64,${base64Data}`);\r\n      } else {\r\n        setError('Image generation failed. Please try again.');\r\n      }\r\n    } catch (e) {\r\n      console.error(\"API call failed:\", e);\r\n      setError(`An error occurred during image generation: ${e.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateLook = async () => {\r\n    if (!generatedImage || !updatePrompt) {\r\n      setError('Please generate a new look and enter a prompt to update it.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await fetch(generatedImage);\r\n      const blob = await response.blob();\r\n      const base64Image = await fileToBase64(blob);\r\n\r\n      const payload = {\r\n        contents: [{\r\n          parts: [\r\n            { text: `Update the provided image based on the following instruction. Completely replace any existing clothes with a new look as described: ${updatePrompt}. Do not alter the background or the person's face in any way unless specified in the prompt.` },\r\n            {\r\n              inlineData: {\r\n                mimeType: \"image/png\",\r\n                data: base64Image.split(',')[1]\r\n              }\r\n            }\r\n          ]\r\n        }],\r\n        generationConfig: {\r\n          responseModalities: [\"IMAGE\"]\r\n        },\r\n        model: \"gemini-2.5-flash-image-preview\"\r\n      };\r\n\r\n      // Call the proxy endpoint\r\n      const apiResponse = await fetch(IMAGE_GEN_ENDPOINT, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      if (!apiResponse.ok) {\r\n        throw new Error(`HTTP error! status: ${apiResponse.status}`);\r\n      }\r\n\r\n      const result = await apiResponse.json();\r\n      if (result.error) {\r\n        throw new Error(result.error);\r\n      }\r\n      const base64Data = result?.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;\r\n\r\n      if (base64Data) {\r\n        setGeneratedImage(`data:image/png;base64,${base64Data}`);\r\n      } else {\r\n        setError('Image update failed. Please try again.');\r\n      }\r\n    } catch (e) {\r\n      console.error(\"API call failed:\", e);\r\n      setError(`An error occurred during image update: ${e.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // --- END API CALL HANDLERS ---\r\n\r\n  const renderUploadSection = (title, uploadHandler, uploadState, uploadIcon, dropdownOptions, dropdownValue, dropdownHandler) => (\r\n    <div className=\"flex flex-col md:flex-row items-center justify-center gap-4 mb-4\">\r\n      <label htmlFor={`${title.toLowerCase().replace(/\\s/g, '-')}-upload`} className=\"cursor-pointer bg-green-500 hover:bg-green-600 transition-colors text-white font-semibold py-2 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\">\r\n        {uploadIcon}\r\n        <span>{uploadState ? `Change ${title}` : `Upload ${title}`}</span>\r\n      </label>\r\n      <input\r\n        id={`${title.toLowerCase().replace(/\\s/g, '-')}-upload`}\r\n        type=\"file\"\r\n        accept=\"image/png, image/jpeg\"\r\n        className=\"hidden\"\r\n        onChange={uploadHandler}\r\n      />\r\n      <select\r\n        value={dropdownValue}\r\n        onChange={dropdownHandler}\r\n        className=\"py-2 px-4 rounded-full bg-white border border-gray-300 text-gray-700 font-medium\"\r\n      >\r\n        {dropdownOptions.map((option) => (\r\n          <option key={option} value={option}>{option}</option>\r\n        ))}\r\n      </select>\r\n      {uploadState && (\r\n        <div className=\"mt-4 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\">\r\n          <img src={URL.createObjectURL(uploadState)} alt={title} className=\"max-h-32 rounded-lg object-contain\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen font-sans antialiased text-gray-800 flex flex-col items-center py-12 px-4\">\r\n      <div className=\"bg-white p-8 rounded-3xl shadow-2xl w-full max-w-2xl text-center\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-blue-600 mb-2\">Virtual Try-On</h1>\r\n        <p className=\"text-gray-500 mb-8 text-lg\">Upload your photo and try on different accessories or outfits.</p>\r\n\r\n        {/* Face Image upload and preview section */}\r\n        <div className=\"mb-8\">\r\n          <label htmlFor=\"face-image-upload\" className=\"cursor-pointer bg-blue-500 hover:bg-blue-600 transition-colors text-white font-semibold py-3 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\">\r\n            <Camera size={20} />\r\n            <span>{uploadedFaceImage ? 'Change Photo' : 'Upload Your Photo'}</span>\r\n          </label>\r\n          <input\r\n            id=\"face-image-upload\"\r\n            type=\"file\"\r\n            accept=\"image/png, image/jpeg\"\r\n            className=\"hidden\"\r\n            onChange={handleFaceImageUpload}\r\n          />\r\n          {isAnalyzing && (\r\n            <div className=\"mt-4 text-sm text-gray-500 flex items-center justify-center space-x-2\">\r\n              <svg className=\"animate-spin h-4 w-4 text-blue-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n              </svg>\r\n              <span>Analyzing photo...</span>\r\n            </div>\r\n          )}\r\n          {faceImagePreview && (\r\n            <div className=\"mt-6 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\">\r\n              <img src={faceImagePreview} alt=\"Uploaded Face\" className=\"max-h-64 rounded-lg object-contain\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Mode selection */}\r\n        {uploadedFaceImage && !isAnalyzing && (\r\n          <div className=\"mb-8\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Choose an Option</h2>\r\n            <div className=\"flex flex-wrap justify-center gap-4\">\r\n              <button\r\n                onClick={() => setMode('accessory')}\r\n                className={`py-2 px-4 rounded-full font-medium transition-all transform hover:scale-105\r\n                  ${mode === 'accessory' ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                }`}\r\n              >\r\n                Choose an Accessory\r\n              </button>\r\n              <button\r\n                onClick={() => setMode('outfit')}\r\n                className={`py-2 px-4 rounded-full font-medium transition-all transform hover:scale-105\r\n                  ${mode === 'outfit' ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                }`}\r\n              >\r\n                Choose an Outfit\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Accessory upload section */}\r\n        {uploadedFaceImage && !isAnalyzing && mode === 'accessory' && (\r\n          <div className=\"mb-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Upload Your Accessory</h3>\r\n            <div className=\"flex flex-col md:flex-row items-center justify-center gap-4\">\r\n              <select\r\n                value={accessoryType}\r\n                onChange={(e) => setAccessoryType(e.target.value)}\r\n                className=\"py-2 px-4 rounded-full bg-white border border-gray-300 text-gray-700 font-medium\"\r\n              >\r\n                {ACCESSORY_TYPES.map((type) => (\r\n                  <option key={type} value={type}>{type}</option>\r\n                ))}\r\n              </select>\r\n              <label htmlFor=\"accessory-image-upload\" className=\"cursor-pointer bg-green-500 hover:bg-green-600 transition-colors text-white font-semibold py-2 px-6 rounded-full inline-flex items-center space-x-2 shadow-lg\">\r\n                <Upload size={20} />\r\n                <span>{uploadedAccessoryImage ? 'Change Accessory' : 'Upload Accessory'}</span>\r\n              </label>\r\n              <input\r\n                id=\"accessory-image-upload\"\r\n                type=\"file\"\r\n                accept=\"image/png, image/jpeg\"\r\n                className=\"hidden\"\r\n                onChange={(e) => { setUploadedAccessoryImage(e.target.files[0] || null); }}\r\n              />\r\n            </div>\r\n            {uploadedAccessoryImage && (\r\n              <div className=\"mt-4 border-4 border-dashed border-gray-300 rounded-xl p-2 inline-block\">\r\n                <img src={URL.createObjectURL(uploadedAccessoryImage)} alt=\"Uploaded Accessory\" className=\"max-h-32 rounded-lg object-contain\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Outfit upload section */}\r\n        {uploadedFaceImage && !isAnalyzing && mode === 'outfit' && (\r\n          <div className=\"mb-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Upload Your Outfit</h3>\r\n            <div className=\"space-y-4\">\r\n              {renderUploadSection(\r\n                'Top',\r\n                (e) => { setUploadedTopImage(e.target.files[0] || null); },\r\n                uploadedTopImage,\r\n                <Shirt size={20} />,\r\n                TOP_TYPES,\r\n                topType,\r\n                (e) => setTopType(e.target.value)\r\n              )}\r\n              {renderUploadSection(\r\n                'Pants',\r\n                (e) => { setUploadedPantsImage(e.target.files[0] || null); },\r\n                uploadedPantsImage,\r\n                <PawPrint size={20} />,\r\n                PANTS_TYPES,\r\n                pantsType,\r\n                (e) => setPantsType(e.target.value)\r\n              )}\r\n              {renderUploadSection(\r\n                'Shoes',\r\n                (e) => { setUploadedShoesImage(e.target.files[0] || null); },\r\n                uploadedShoesImage,\r\n                <ShoppingBag size={20} />,\r\n                SHOES_TYPES,\r\n                shoesType,\r\n                (e) => setShoesType(e.target.value)\r\n              )}\r\n               {renderUploadSection(\r\n                'Dress',\r\n                (e) => { setUploadedDressImage(e.target.files[0] || null); },\r\n                uploadedDressImage,\r\n                <ShoppingBagIcon size={20} />,\r\n                DRESS_TYPES,\r\n                dressType,\r\n                (e) => setDressType(e.target.value)\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Generation button and loading state */}\r\n        {uploadedFaceImage && !isAnalyzing && (\r\n          <div className=\"mb-8\">\r\n            <button\r\n              onClick={generateImage}\r\n              disabled={loading || (mode === 'accessory' && !uploadedAccessoryImage) || (mode === 'outfit' && (!uploadedTopImage && !uploadedPantsImage && !uploadedShoesImage && !uploadedDressImage))}\r\n              className=\"bg-green-500 hover:bg-green-600 transition-colors text-white font-bold py-3 px-8 rounded-full shadow-lg inline-flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {loading ? (\r\n                <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n              ) : (\r\n                <>\r\n                  <Sparkles size={20} />\r\n                  <span>Try It On!</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Display results or error */}\r\n        {error && (\r\n          <div className=\"bg-red-100 text-red-700 p-4 rounded-lg font-medium mb-8\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {generatedImage && (\r\n          <div className=\"mt-8\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Your New Look</h2>\r\n            <div className=\"border-4 border-blue-200 rounded-xl p-2 inline-block\">\r\n              <img src={generatedImage} alt=\"Generated\" className=\"max-h-[500px] rounded-lg object-contain\" />\r\n            </div>\r\n\r\n            {/* New section for updating the look */}\r\n            <div className=\"mt-8 p-6 bg-gray-50 rounded-2xl border border-gray-200\">\r\n              <h3 className=\"text-lg font-semibold mb-4\">Update Your Look</h3>\r\n              <textarea\r\n                className=\"w-full h-24 p-4 rounded-lg border border-gray-300 mb-4 focus:ring-blue-500 focus:border-blue-500 resize-none\"\r\n                placeholder=\"e.g., 'remove the glasses', 'change the jacket to red', 'add a hat'\"\r\n                value={updatePrompt}\r\n                onChange={(e) => setUpdatePrompt(e.target.value)}\r\n              />\r\n              <button\r\n                onClick={updateLook}\r\n                disabled={loading || !updatePrompt}\r\n                className=\"bg-purple-500 hover:bg-purple-600 transition-colors text-white font-bold py-3 px-8 rounded-full shadow-lg inline-flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {loading ? (\r\n                  <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 A7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                  </svg>\r\n                ) : (\r\n                  <>\r\n                    <RefreshCw size={20} />\r\n                    <span>Update New Look</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}